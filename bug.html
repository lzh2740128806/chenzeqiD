<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div class="tongxingzheng_bg">
    <div class="tongxingcard">
        <div class="titlebar">访客通行证</div>
        <div class="tx_content">
            <div class="wl_logo"><img src="upload/5f9c0f26c61ace2c.png" ></div>
            <div class="xinxi">
                <div class="name">$!{data.name}</div>
                <div class="tongxingma">
                    <span class="text">通行码：</span>
                    <span class="code">$!{data.number}</span>
                </div>
            </div>
        </div>
        <div class="itemLine">
            <span class="mudi">目的地：</span>
            <span class="address">$!{data.property}</span>
        </div>
        <div class="itemLine">
            <div class="item">
                <div class="text">人数：</div>
                <div class="amount">$!{data.persons}</div>
            </div>
            <div class="item">
                <div class="text">是否有车：</div>
                <div class="amount">#if($!data.haveCar)有#else 无#end</div>
            </div>
        </div>
        <div class="itemLine">
            <span class="youxiaoshijian">有效时间：</span>
            <span class="date">$!{data.visitingTime}</span>
            <div class="tishi">当天有效</div>
        </div>
        <div class="bottom">进入园区时，出示此通行证给保安</div>
    </div>
    <div class="bottomline">
        <div class="item" id="saveImg" style="width: 100%;">保存图片</div>

    </div>
</div>
</body>
</html>
<script src="js/html2canvas.min.js"></script>
<script>
    $(function(){
        $("#saveImg").click(function(){
            html2canvas($(".tongxingzheng_bg")).then(function(canvas) {
                var imgUri = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // 获取生成的图片的url
                window.location.href= imgUri; // 下载图片
            });
        });
    });
</script>